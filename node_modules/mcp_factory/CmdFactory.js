var ctrl = require("mcp_control");
var adminCtrl = ctrl.adminCtrl;
var printCtrl = ctrl.printCtrl;
var tradeCtrl = ctrl.tradeCtrl;
var queryCtrl = ctrl.queryCtrl;
var schemeCtrl = ctrl.schemeCtrl;
var accountCtrl = ctrl.accountCtrl;

var config = require("mcp_config");
var ec = config.ec;

var CmdFactory = function(){};

CmdFactory.prototype.handle = function(headNode, bodyStr, cb)
{
    var cmdGroup = headNode.cmd.match(/^([A-Z]+)([0-9]{1,})$/);
    if(cmdGroup[1] == "AD")
    {
        adminCtrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == 'P')
    {
        printCtrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == 'T')
    {
        tradeCtrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == 'Q')
    {
        queryCtrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == 'S')
    {
        schemeCtrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == 'A')
    {
        accountCtrl.handle(headNode, bodyStr, cb);
    }
    else
    {
        cb(ec.E2060);
    }
};

var cmdFactory = new CmdFactory();
module.exports = cmdFactory;